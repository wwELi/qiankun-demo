# qiankun-demo
```javascript
npm start
```

## 为什么需要微前端

- 各个模块独立开发部署, 增加多人协同开发的效率同时降低错误和回归问题的风险，相互之间的依赖性急剧下降。
- 子模块可以使用不同的技术栈, 可以根据自己项目定制化一些开发, 提升开发效率
- 可以更小范围的响应变化

### 痛点               
  - 公共模块重复造轮子   - 提取公共模块(npm, submodule)
  - 浏览器最终可能会下载多个框架和重复的代码 - 利用webpack 抽取公共模块

## 微前端方案对比

### iframe
  - iframe最大的特性就是提供了浏览器原生的硬隔离方案，不论是样式隔离、js 隔离这类问题统统都能被完美解决。但它的最大问题也在于他的隔离性无法被突破，导致应用间上下文无法被共享，随之带来开发体验、产品体验的问题
  - 不是单页应用，会导致浏览器刷新 iframe url 状态丢失、后退前进按钮无法使用。
  - 弹框类的功能无法应用到整个大应用中，只能在对应的窗口内展示。
  - 由于可能应用间不是在相同的域内，主应用的 cookie 要透传到根域名都不同的子应用中才能实现免登录效果。
  - 每次子应用进入都是一次浏览器上下文重建、资源重新加载的过程，占用大量资源的同时也在极大地消耗资源。

### qiankun
  - 基于single-spa封装，提供了更加开箱即用的 API
  - 技术栈无关，任意技术栈的应用均可 使用/接入，不论是 React/Vue/- Angular 还是其他等框架
  - HTML Entry 接入方式，让你接入微应用像使用 iframe 一样简单
  - 样式隔离，确保微应用之间样式互相不干扰
  - JS 沙箱，确保微应用之间 全局变量/事件 不冲突
  - 资源预加载，在浏览器空闲时间预加载未打开的微应用资源，加速微应用打开速度


## 使用的案例
- 蚂蚁金服
oppo cloud

## 部署方案

需要各个模块独立部署，主应用和子应用可以部署在同一个服务器下，通过目录层级进行区分；也可以部署在不同的服务器上，这时主应用的就需要通过nginx做一次反向代理，把指向子应用的访问路径转发到子应用的服务入口。